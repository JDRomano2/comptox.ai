
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Graph &#8212; ComptoxAI 0.1a documentation</title>
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Graph Algorithms" href="graph_algorithm.html" />
    <link rel="prev" title="API Reference" href="index.html" />

   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />


<script src="https://use.fontawesome.com/04f6e4e6fe.js"></script>

  </head><body>
<header>
  <nav class="navbar navbar-expand-md navbar-light bg-light">
    <a href="http://comptox.ai" class="navbar-brand" id="logo">ComptoxAI</a>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        
        <li class="nav-item"><a href="http://comptox.ai/about.html" class="nav-link">About</a></li>
        <li class="nav-item"><a href="http://comptox.ai/use.html" class="nav-link">Use</a></li>
        <li class="nav-item"><a href="http://comptox.ai/docs" class="nav-link">API Docs</a></li>
        <li class="nav-item"><a href="http://comptox.ai/contact.html" class="nav-link">Contact</a></li>
      </ul>
    </div>
    <div class="nav navbar-nav navbar-right">
      <ul class="navbar-nav navbar-right">
        <li class="navbar-brand"><a href="https://github.com/jdromano2/comptox_ai" target="_blank"><i class="fa fa-github-square fa-2x"></i></a></li>
      </ul>
    </div>
  </nav>
</header>



  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">ComptoxAI</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=jdromano2&repo=comptox_ai&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../guide/index.html">User Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">API Reference</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">API Reference</a></li>
      <li>Next: <a href="graph_algorithm.html" title="next chapter">Graph Algorithms</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-comptox_ai.graph">
<span id="graph"></span><h1>Graph<a class="headerlink" href="#module-comptox_ai.graph" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="comptox_ai.graph.Graph">
<em class="property">class </em><code class="sig-prename descclassname">comptox_ai.graph.</code><code class="sig-name descname">Graph</code><span class="sig-paren">(</span><em class="sig-param">data: comptox_ai.graph.io.GraphDataMixin</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph" title="Permalink to this definition">¶</a></dt>
<dd><p>A graph representation of ComptoxAI data.</p>
<p>The internal data storage can be in several different formats, each of
which has advantages in different scenarios.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>data</strong><span class="classifier">comptox_ai.graph.io.GraphDataMixin</span></dt><dd><p>A graph data structure that is of one of the formats compliant with
ComptoxAI’s standardized graph API.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Attributes</dt>
<dd class="field-even"><dl class="simple">
<dt><strong>format</strong><span class="classifier">{“graphsage”, “networkx”, “neo4j}</span></dt><dd><p>Internal format of the graph data. The format determines many aspects
of how you interact with the graph, including the set of methods that
can be called on it and the types of models that you can construct
without first converting to another format.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Methods</p>
<table class="longtable docutils align-default">
<colgroup>
<col style="width: 10%" />
<col style="width: 90%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.add_edges" title="comptox_ai.graph.Graph.add_edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_edges</span></code></a>(self, edges, tuple])</p></td>
<td><p>Add one or more edges to the graph.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.add_nodes" title="comptox_ai.graph.Graph.add_nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">add_nodes</span></code></a>(self, nodes, tuple])</p></td>
<td><p>Add one or more nodes to the graph.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.convert" title="comptox_ai.graph.Graph.convert"><code class="xref py py-obj docutils literal notranslate"><span class="pre">convert</span></code></a>(self, to_fmt)</p></td>
<td><p>Convert the graph data structure into the specified format.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.edges" title="comptox_ai.graph.Graph.edges"><code class="xref py py-obj docutils literal notranslate"><span class="pre">edges</span></code></a>(self)</p></td>
<td><p>Get all edges in the graph and return as an iterable of tuples.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.from_graphsage" title="comptox_ai.graph.Graph.from_graphsage"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_graphsage</span></code></a>(prefix, directory)</p></td>
<td><p>Create a new GraphSAGE data structure from files formatted according to the examples given in <a class="reference external" href="https://github.com/williamleif/GraphSAGE">https://github.com/williamleif/GraphSAGE</a>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.from_neo4j" title="comptox_ai.graph.Graph.from_neo4j"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_neo4j</span></code></a>(config_file)</p></td>
<td><p>Load a connection to a Neo4j graph database and use it to instantiate a comptox_ai.graph.io.Neo4j object.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.from_networkx" title="comptox_ai.graph.Graph.from_networkx"><code class="xref py py-obj docutils literal notranslate"><span class="pre">from_networkx</span></code></a>()</p></td>
<td><p>Create a new NetworkX graph from a JSON node-link graph file.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#comptox_ai.graph.Graph.nodes" title="comptox_ai.graph.Graph.nodes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">nodes</span></code></a>(self)</p></td>
<td><p>Get all nodes in the graph and return as an iterable of tuples.</p></td>
</tr>
</tbody>
</table>
<table class="docutils align-default">
<colgroup>
<col style="width: 55%" />
<col style="width: 45%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>from_dgl</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="comptox_ai.graph.Graph.add_edges">
<code class="sig-name descname">add_edges</code><span class="sig-paren">(</span><em class="sig-param">self, edges: Union[List[tuple], tuple]</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.add_edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one or more edges to the graph.</p>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.add_nodes">
<code class="sig-name descname">add_nodes</code><span class="sig-paren">(</span><em class="sig-param">self, nodes: Union[List[tuple], tuple]</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.add_nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Add one or more nodes to the graph.</p>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.convert">
<code class="sig-name descname">convert</code><span class="sig-paren">(</span><em class="sig-param">self</em>, <em class="sig-param">to_fmt: str</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert the graph data structure into the specified format.</p>
<p>The actual graph contained in a <cite>comptox_ai.Graph</cite> can be in a variety
of different formats. When the user loads a graph</p>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.edges">
<code class="sig-name descname">edges</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.edges" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all edges in the graph and return as an iterable of tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>iterable</dt><dd><p>Iterable over tuples containing graph edge triples.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.from_graphsage">
<em class="property">classmethod </em><code class="sig-name descname">from_graphsage</code><span class="sig-paren">(</span><em class="sig-param">prefix: str</em>, <em class="sig-param">directory: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.from_graphsage" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new GraphSAGE data structure from files formatted according to
the examples given in <a class="reference external" href="https://github.com/williamleif/GraphSAGE">https://github.com/williamleif/GraphSAGE</a>.</p>
<p>The parameters should point to files with the following structure:</p>
<dl class="simple">
<dt>{prefix}-G.json</dt><dd><p>JSON file containing a NetworkX ‘node link’ instance of the input
graph. GraphSAGE usually expects there to be ‘val’ and ‘test’
attributes on each node indicating if they are part of the
validation and test sets, but this isn’t enforced by ComptoxAI (at
least not currently).</p>
</dd>
<dt>{prefix}-id_map.json</dt><dd><p>A JSON object that maps graph node ids (integers) to consecutive
integers (0-indexed).</p>
</dd>
<dt>{prefix}-class_map.json (OPTIONAL)</dt><dd><p>A JSON object that maps graph node ids (integers) to a one-hot list
of binary class membership (e.g., {2: [0, 0, 1, 0, 1]} means that
node 2 is a member of classes 3 and 5). NOTE: While this is shown
as a mandatory component of a dataset in GraphSAGE’s documentation,
we don’t enforce that. NOTE: The notion of a class in terms of
GraphSAGE is different than the notion of a class in heterogeneous
network theory. Here, a ‘class’ is a label to be used in a
supervised learning setting (such as classifying chemicals as
likely carcinogens versus likely non-carcinogens).</p>
</dd>
<dt>{prefix}-feats.npy (OPTIONAL)</dt><dd><p>A NumPy ndarray containing numerical node features. NOTE: This
serialization is currently not compatible with heterogeneous
graphs, as GraphSAGE was originally implemented for
nonheterogeneous graphs only.</p>
</dd>
<dt>{prefix}-walks.txt (OPTIONAL)</dt><dd><p>A text file containing precomputed random walks along the graph.
Each line is a pair of node integers (e.g., the second fields in
the id_map file) indicating an edge included in random walks. The
lines should be arranged in ascending order, starting with the 
first item in each pair.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>prefix</strong><span class="classifier">str</span></dt><dd><p>The prefix used at the beginning of each file name (see above for
format specification).</p>
</dd>
<dt><strong>directory</strong><span class="classifier">str, default=None</span></dt><dd><p>The directory (fully specified or relative) containing the data
files to load.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.from_neo4j">
<em class="property">classmethod </em><code class="sig-name descname">from_neo4j</code><span class="sig-paren">(</span><em class="sig-param">config_file: str = None</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.from_neo4j" title="Permalink to this definition">¶</a></dt>
<dd><p>Load a connection to a Neo4j graph database and use it to
instantiate a comptox_ai.graph.io.Neo4j object.</p>
<p>NOTE: All we do here is create a driver for the graph database; the
Neo4j constructor handles building the node index and other important
attributes. This is different from most of the other formats, where
the attributes are provided by the constructor</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config_file</strong><span class="classifier">str, default None</span></dt><dd><p>Path to a ComptoxAI configuration file. If None, ComptoxAI will
search for a configuration file in the default location. For more
information, refer to <a class="reference external" href="http://comptox.ai/docs/guide/building.html">http://comptox.ai/docs/guide/building.html</a>.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Raises</dt>
<dd class="field-even"><dl class="simple">
<dt>RuntimeError</dt><dd><p>If the data in the configuration file does not point to a valid
Neo4j graph database.</p>
</dd>
</dl>
</dd>
</dl>
<div class="admonition seealso">
<p class="admonition-title">See also</p>
<dl class="simple">
<dt><code class="xref py py-obj docutils literal notranslate"><span class="pre">comptox_ai.graph.io.Neo4j</span></code></dt><dd></dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.from_networkx">
<em class="property">classmethod </em><code class="sig-name descname">from_networkx</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.from_networkx" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new NetworkX graph from a JSON node-link graph file.</p>
</dd></dl>

<dl class="method">
<dt id="comptox_ai.graph.Graph.nodes">
<code class="sig-name descname">nodes</code><span class="sig-paren">(</span><em class="sig-param">self</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Graph.nodes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all nodes in the graph and return as an iterable of tuples.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><dl class="simple">
<dt>iterable</dt><dd><p>Iterable over 2-tuples containing graph nodes. The first element is
the node’s integer ID and the second is the URI of that node (if
available).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="comptox_ai.graph.Path">
<em class="property">class </em><code class="sig-prename descclassname">comptox_ai.graph.</code><code class="sig-name descname">Path</code><span class="sig-paren">(</span><em class="sig-param">node_list</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Path" title="Permalink to this definition">¶</a></dt>
<dd><p>A sequence of graph database nodes representing a directed path.</p>
<p class="rubric">Methods</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 67%" />
<col style="width: 33%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>get_uri_sequence</strong></p></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="comptox_ai.graph.Vertex">
<em class="property">class </em><code class="sig-prename descclassname">comptox_ai.graph.</code><code class="sig-name descname">Vertex</code><span class="sig-paren">(</span><em class="sig-param">neo4j_record: neo4j.Record</em>, <em class="sig-param">raw_edges=None</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Vertex" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of a vertex in the graph database (also called a /node/).</p>
</dd></dl>

<dl class="class">
<dt id="comptox_ai.graph.Edge">
<em class="property">class </em><code class="sig-prename descclassname">comptox_ai.graph.</code><code class="sig-name descname">Edge</code><span class="sig-paren">(</span><em class="sig-param">uri: str</em><span class="sig-paren">)</span><a class="headerlink" href="#comptox_ai.graph.Edge" title="Permalink to this definition">¶</a></dt>
<dd><p>Representation of an edge in the graph database.</p>
</dd></dl>

</div>


          </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2020, Joseph D. Romano.
      
      |
      <a href="../_sources/api/graph.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>