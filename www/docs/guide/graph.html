<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    
    <title>ComptoxAI’s graph database &mdash; ComptoxAI v0.1.dev0 Manual</title>
    
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-bootstrap.css">
    <link rel="stylesheet" type="text/css" href="../_static/css/spc-extend.css">
    <link rel="stylesheet" href="../_static/scipy.css" type="text/css" >
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" >
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" >
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/copybutton.js"></script>
    <link rel="index" title="Index" href="../genindex.html" >
    <link rel="search" title="Search" href="../search.html" >
    <link rel="top" title="ComptoxAI v0.1.dev0 Manual" href="../index.html" >
    <link rel="up" title="ComptoxAI User Guide" href="index.html" >
    <link rel="next" title="AOPs (Adverse Outcome Pathways) in ComptoxAI" href="aop.html" >
    <link rel="prev" title="How to build ComptoxAI" href="building.html" > 
  </head>
  <body>
<div class="container">
  <span class="top-logo-header">
    <a href="/" class="navbar-brand" id="logo">ComptoxAI</a>
  </span> 
</div>


    <div class="container">
      <div class="main">
        
	<div class="row-fluid">
	  <div class="span12">
	    <div class="spc-navbar">
              
    <ul class="nav nav-pills pull-left">
        <li class="active"><a href="https://comptox.ai/">comptox.ai</a></li>
	
        <li class="active"><a href="../contents.html">ComptoxAI v0.1.dev0 Manual</a></li>
	
          <li class="active"><a href="index.html" accesskey="U">ComptoxAI User Guide</a></li> 
    </ul>
              
              
    <ul class="nav nav-pills pull-right">
      <li class="active">
        <a href="../genindex.html" title="General Index"
           accesskey="I">index</a>
      </li>
      <li class="active">
        <a href="aop.html" title="AOPs (Adverse Outcome Pathways) in ComptoxAI"
           accesskey="N">next</a>
      </li>
      <li class="active">
        <a href="building.html" title="How to build ComptoxAI"
           accesskey="P">previous</a>
      </li>
    </ul>
              
	    </div>
	  </div>
	</div>
        

	<div class="row-fluid">
      <div class="spc-rightsidebar span3">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../contents.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">ComptoxAI’s graph database</a><ul>
<li><a class="reference internal" href="#building-and-installing-the-database-locally">Building and installing the database locally</a><ul>
<li><a class="reference internal" href="#populating-the-ontology-with-individuals">Populating the ontology with individuals</a></li>
<li><a class="reference internal" href="#importing-the-ontology-into-neo4j">Importing the ontology into Neo4j</a></li>
<li><a class="reference internal" href="#cleaning-up-the-imported-data">Cleaning up the imported data</a></li>
<li><a class="reference internal" href="#merging-additional-data-sources">Merging additional data sources</a></li>
</ul>
</li>
<li><a class="reference internal" href="#connecting-to-our-instance-of-the-database">Connecting to our instance of the database</a></li>
<li><a class="reference internal" href="#api-documentation">API Documentation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="building.html"
                        title="previous chapter">How to build ComptoxAI</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="aop.html"
                        title="next chapter">AOPs (Adverse Outcome Pathways) in ComptoxAI</a></p>

<div id="searchbox" style="display: none" role="search">
  <h4>Quick search</h4>
    <div>
    <form class="search" action="../search.html" method="get">
      <input type="text" style="width: inherit;" name="q" />
      <input type="submit" value="search" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
          <div class="span9">
            
        <div class="bodywrapper">
          <div class="body" id="spc-section-body">
            
  <div class="section" id="module-comptox_ai.doc.graph">
<span id="comptoxai-s-graph-database"></span><h1>ComptoxAI’s graph database<a class="headerlink" href="#module-comptox_ai.doc.graph" title="Permalink to this headline">¶</a></h1>
<p>ComptoxAI’s graph database is meant to completely replace traditional
relational databases used for computational toxicology data. Rather
than storing data in tables with keys linking rows of one table to
rows of another, a graph database stores entities as <strong>nodes</strong> and the
relationships that join entities as <strong>edges</strong>, resulting in a
network-like data structure known to computer scientists as a
<strong>graph</strong>.</p>
<div class="section" id="building-and-installing-the-database-locally">
<h2>Building and installing the database locally<a class="headerlink" href="#building-and-installing-the-database-locally" title="Permalink to this headline">¶</a></h2>
<p><em>(These instructions are incomplete - stay tuned for more info)</em></p>
<p>First, make sure you have the prerequisites installed.</p>
<p>Building the complete database consists of 4 steps:</p>
<ol class="arabic simple">
<li><p>Populating the ComptoxAI ontology with individuals for the core
graph node types.</p></li>
<li><p>Importing the OWL file into Neo4j.</p></li>
<li><p>Cleaning up the imported data.</p></li>
<li><p>Merging other data into the graph database from external sources.</p></li>
</ol>
<p>We’ll walk through these steps individually:</p>
<div class="section" id="populating-the-ontology-with-individuals">
<h3>Populating the ontology with individuals<a class="headerlink" href="#populating-the-ontology-with-individuals" title="Permalink to this headline">¶</a></h3>
<p>The core ontology for ComptoxAI is already provided as part of the
main code distribution, and can be found at <code class="docutils literal notranslate"><span class="pre">data/comptox.owl</span></code>. We
use the ontology in the graph database build process because doing so
lets us control the consistency of node labels, data types, and
relationship labels in the final graph database (Neo4j provides no
out-of-box methods for doing so, which is both a strength and a
limitation of the software). The process relies upon the following
rough equivalencies between a populated OWL ontology and a Neo4j-style
graph database:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>OWL Ontology</p></th>
<th class="head"><p>Neo4j-style graph database</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Ontology</p></td>
<td><p>Graph database</p></td>
</tr>
<tr class="row-odd"><td><p>Class</p></td>
<td><p>Node label</p></td>
</tr>
<tr class="row-even"><td><p>Individual</p></td>
<td><p>Node</p></td>
</tr>
<tr class="row-odd"><td><p>Object property</p></td>
<td><p>Relationship</p></td>
</tr>
<tr class="row-even"><td><p>Data property</p></td>
<td><p>Node data</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="importing-the-ontology-into-neo4j">
<h3>Importing the ontology into Neo4j<a class="headerlink" href="#importing-the-ontology-into-neo4j" title="Permalink to this headline">¶</a></h3>
<p>Now that we have the ontology (preliminarily) populated with
individuals and object properties that will become nodes and
relationships in the graph database, we can use utility functions from
APOC (Neo4j’s standard library) to actually parse the OWL file and
load individuals into the (currently empty) graph database.</p>
</div>
<div class="section" id="cleaning-up-the-imported-data">
<h3>Cleaning up the imported data<a class="headerlink" href="#cleaning-up-the-imported-data" title="Permalink to this headline">¶</a></h3>
<p>If you look at the contents of the graph database now, you’ll see that
there are many odd prefixes and unnecessary</p>
</div>
<div class="section" id="merging-additional-data-sources">
<h3>Merging additional data sources<a class="headerlink" href="#merging-additional-data-sources" title="Permalink to this headline">¶</a></h3>
<p>Test.</p>
</div>
</div>
<div class="section" id="connecting-to-our-instance-of-the-database">
<h2>Connecting to our instance of the database<a class="headerlink" href="#connecting-to-our-instance-of-the-database" title="Permalink to this headline">¶</a></h2>
<p>For users who don’t need (or want) to install the full copy of the
database on their own computer, they can access a (possibly slightly
out-of-date) version of the database hosted on our server and
available for public use. This can be done by tweaking your
configuration file to point to our public IP address:</p>
<div class="admonition-hosted-database-configuration-settings admonition">
<p class="admonition-title">Hosted database configuration settings</p>
<p>Contents of <em class="xref py py-obj">CONFIG.cfg</em>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">NEO4J</span><span class="p">]</span>
<span class="n">Username</span> <span class="o">=</span> <span class="n">neo4j</span>
<span class="n">Password</span> <span class="o">=</span> <span class="n">neo4j</span>
<span class="n">Hostname</span> <span class="o">=</span> <span class="n">XXX</span><span class="o">.</span><span class="n">XXX</span><span class="o">.</span><span class="n">XXX</span><span class="o">.</span><span class="n">XXX</span>  <span class="o">&lt;---</span> <span class="n">we</span><span class="s1">&#39;ll update this soon!</span>
<span class="n">Protocol</span> <span class="o">=</span> <span class="n">bolt</span>
<span class="n">Port</span> <span class="o">=</span> <span class="mi">7687</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="api-documentation">
<h2>API Documentation<a class="headerlink" href="#api-documentation" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
          </div>
        </div>
      </div>
    </div>

    <div class="container container-navbar-bottom">
      <div class="spc-navbar">
        
      </div>
    </div>
    <div class="container">
    <div class="footer">
    <div class="row-fluid">
    <ul class="inline pull-left">
      <li>
        &copy; Copyright 2019, Joseph D. Romano.
      </li>
      <li>
      Last updated on Dec 17, 2019.
      </li>
      <li>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.2.1.
      </li>
    </ul>
    </div>
    </div>
    </div>
  </body>
</html>